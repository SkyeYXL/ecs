---
keyword: [云助手, 远程命令, ecs, aliyun, 运维]
---

# 立即执行命令

通过立即执行命令，您可以同时创建命令和执行命令。

-   实例的状态必须为**运行中**（Running）。
-   在一个阿里云地域下，您可以保存100条云助手命令，配额随您的云服务器使用情况可能会增加。 在立即执行命令时，如果您关闭**保存命令**开关，则不占用100条云助手命令配额。

    **说明：** 您也可以调用API DescribeAccountAttributes，将参数AttributeName.N设置为max-axt-command-count，查询一个地域中云助手命令配额。

-   在一个阿里云地域下，您每天最多能执行5000次云助手命令，配额随您的云服务器使用情况可能会增加。

    **说明：** 您也可以调用API DescribeAccountAttributes，将参数AttributeName.N设置为max-axt-invocation-daily，查询一个地域下单天能运行的云助手命令次数上限。


立即执行云助手命令时，您需要注意以下事项。

-   创建的脚本在Base64编码后大小不能超过16 KB。
-   一份云助手命令中的自定义参数不能超过20个。
-   通过调用API一次执行命令操作最多可以选择50台实例。
-   创建命令时，您需要自行测试命令的语法、逻辑或算法是否正确。

    例如，假设您已在实例中创建了一个/backup目录（`mkdir /backup`），以下Shell命令将在该目录中归档一份文件。

    ```
    #!/bin/bash 
    OF=/backup/my-backup-$(date +%Y%m%d).tgz
    tar -cf $OF {{file}}
    ```

    **说明：** 以上示例命令中，`{{file}}`是一个自定义参数，您可以在执行命令时设置为需要归档的目标文件，如/app/usrcredential。自定义参数能满足动态取值以及一值多用的场景。对于具有安全敏感性的数据以及随环境变化的数据，建议您设置自定义参数，例如AccessKey、实例ID、授权码、时间参数、关键系统文件等。


1.  登录[ECS管理控制台云助手页面](https://ecs.console.aliyun.com/#/cloudAssistant/region/cn-hangzhou)。

2.  在顶部菜单栏左上角处，选择地域。

3.  单击**创建/执行命令**。

4.  在**命令信息**区域，设置参数。

    参数说明如下表所示。

    |名称|描述|
    |--|--|
    |命令来源|选择命令来源。    -   **输入新命令**：创建一个新命令。
    -   **选择已有命令**：选择已创建的命令。 |
    |命令名称|设置命令名称。|
    |命令类型|选择命令类型。    -   Linux：选择**Shell**。
    -   Windows：选择**Bat**或者**Power Shell**。 |
    |命令内容|编辑或者粘贴您的命令。有关Shell命令的示例，可以参见[查看实例系统配置](/cn.zh-CN/运维与监控/云助手/DevOps自动化运维实践/查看实例系统配置.md)。 |
    |使用参数|选择是否启用参数。如果您开启了**使用参数**功能，在**命令内容**中以`{{key}}`格式设置自定义参数。 |
    |命令参数|设置**命令内容**中`{{key}}`自定义参数的取值。仅在开启了**使用参数**功能后可设置此参数。 |
    |保存命令|选择是否保存命令。|
    |命令描述|设置命令的描述信息。建议设置命令用途等信息，方便后续管理维护。|
    |执行路径|自定义命令的执行路径。默认路径如下：    -   Linux：默认在root用户的/home目录。
    -   Windows：默认在云助手客户端进程目录，例如，C:\\ProgramData\\aliyun\\assist\\$\(version\)。 |
    |超时时间|设置命令在实例中的**超时时间**，当执行命令的任务超时后，云助手将强制终止任务进程。单位为秒，默认为60秒，最小为10秒。如果您设置的**超时时间**小于10秒，为确保命令执行成功，会被系统设置为10秒。 |

5.  在**选择实例**区域，选中需要执行命令的目标实例。

6.  单击**执行**。


[查看执行结果及修复常见问题](/cn.zh-CN/运维与监控/云助手/使用云助手/查看执行结果及修复常见问题.md)

**相关文档**  


[RunCommand](/cn.zh-CN/API参考/云助手/RunCommand.md)

[DescribeAccountAttributes](/cn.zh-CN/API参考/其他接口/DescribeAccountAttributes.md)

